## 介绍

当分析软件开发和维护项目的工作模式时，会出现一个令人惊讶的假设。软件质量太差，生产力远低于应有的水平。质量差主要表现为三个主要的软件经济问题：（1）由于质量差而被取消的项目从未发布； (2) 因质量差延长测试时间导致进度延误； (3) 发现和修复错误的工作量过大，通常超过软件总工作量的 60%。
由于错误内容过多而将被取消的软件项目所花费的软件工作量似乎吸收了超过 20% 的美国软件劳动力。此外，大约 60% 的美国软件工程工作时间集中在查找和修复错误上，而这本来是可以避免的。最后，主要应用程序的软件计划比应有的时间长约 25%，这是由于质量差而扩大了测试间隔。
在一个完整的软件工程工作年中，只有大约 48 天用于代码开发。大约 53 天用于查找和修复当前应用程序中的错误。大约 16 天用于取消的项目。大约 15 天用于检查和静态分析。大约 13 天的时间用于修复遗留代码中的错误，即每年 97 天基本上是“浪费”在本可以以低成本防止或删除的错误上。似乎没有其他主要职业像软件工程那样为取消的项目或缺陷修复付出如此多的努力。
请注意，2020 年的冠状病毒由于许多因素改变了软件工程，例如在家工作以及取消检查或员工会议等小组活动，除非它们是通过 Zoom 或远程完成的。毫无疑问，软件生产力会下降，质量会变得更糟，但现在知道将产生的实际损失还为时过早。
软件是 21 世纪劳动密集程度最高的职业之一（软件工程的技术和社会史，琼斯，2014 年）。软件也是最具挑战性的商业活动之一，因为软件项目难以控制，并且有很大比例的延迟和彻底取消。软件延迟和取消的主要原因是由于大量“错误”或错误，它们的消除可以吸收真正大型软件项目 60% 以上的工作量。
当仔细分析软件进度和成本估算中的错误时，可以看出进度延误和成本超支的一个主要来源是应用程序存在大量错误以致无法运行或无法发布（软件质量经济学，Jones 和 Bonsignour，2011 年）。这种现象的一个著名例子是由于控制行李处理系统的软件错误导致丹佛机场开放一年的延迟。过多的错误或错误问题也导致了许多软件应用程序的发布延迟，即使是微软和国防部等知名公司和政府机构也是如此。
取消的项目、进度延迟和成本超支都有一个共同的根源：可以预防的过多缺陷，再加上劳动密集型的缺陷消除方法，例如测试和人工检查。

## 分析软件工程师和程序员的工作模式
软件工程是一个非常劳动密集型的职业。软件应用程序的高劳动量的一个关键原因是因为这些应用程序非常复杂，因此非常容易出错。
软件应用程序中的大量严重错误或“错误”对软件行业有几个不幸的影响：
由于高错误率，大量软件项目被取消。
软件工程的大部分开发工作是缺陷去除。
软件工程的大部分维护工作是缺陷修复。
使用 Namcook 软件评估和基准研究期间收集的数据，表 2.1 显示了 2017 日历年在美国进行的软件“项目”的大致数量。软件“项目”被定义为分配给开发或增强特定的软件应用程序。
表 2.1 2020 年软件开发工作量分布









每个规模范围内取消的项目百分比数据取自作者的《软件系统失败和成功模式》（Jones 1995）一书，并使用更新的《软件质量经济学》（Jones 和 Bonsigour， 2012 年）加上 2017 年年中之前完成的客户研究的新数据，这些数据发表在 2017 年的两本新书中：软件方法：量化比较（2016 年）；软件国家和行业比较（2017 年）。
很少有小项目被取消，但大多数大型系统在没有完成的情况下就被终止了。尽管与取消项目有关的原因有很多，但大多数的根本原因是由于错误内容过多而超出了预算和进度。延迟和超支主要是由于质量差，导致测试超出预期。
下一个感兴趣的主题是量化与六个规模平台相关的人员配备，以确定似乎浪费在未完成项目上的软件工作量。
表 2.4 显示了分配给六个主要规模平台中每个项目的美国软件人员的大致数量。显然，大型系统（其中一些拥有数百名软件工程师）吸收了大量可用的软件人员。
表 2.4 显示，软件行业在尝试开发超过 10,000 个功能点的应用程序时遇到了重大问题。在这些更大的规模范围内，取消是一个主要的经济问题，而未被取消的项目都会延迟并超出预算。不到5%的主要系统有满意的结论。
事实上，对于外包的大型系统，似乎约有 5% 最终会因违约诉讼而告上法庭。拥有与我们成功的项目结果相同比例的诉讼，这在专业上令人尴尬！
表 2.1、2.2、2.3 和 2.4 展示了一幅令人不安的图景。由于大型应用程序被取消的项目比小型应用程序更频繁，因此美国超过 22% 的可用软件人员正在从事不会完成的项目！

## 软件项目认证材料的再利用
只要软件应用程序是定制设计和手工编码的，软件将仍然是一种劳动密集型工艺，而不是现代专业活动。由于人类表现的内在限制和可以在不疲劳的情况下工作的小时数的法律限制，即使使用优秀的方法，手动软件开发也不能比平均开发好得多 15%。
以高速实现一致卓越的最佳长期策略是消除手动设计和编码，转而使用经过认证的可重复使用组件进行构建。
认识到软件重用包括许多可交付成果而不仅仅是源代码，这一点很重要。一套完整的可重用软件组件至少包括以下 10 项（软件工程最佳实践；琼斯，2010）。

1. 可重用的要求。
2. 可重用的架构。
3. 可重复使用的设计。
4. 可重用的代码。
5. 可重复使用的项目计划和估算。
6. 可重复使用的测试计划。
7. 可重用的测试脚本。
8. 可重用的测试用例。
9. 可重复使用的用户手册。
10. 可重复使用的培训材料。

在重新使用变得安全且经济可行之前，这些材料需要经过质量接近零缺陷水平的认证。重复使用有缺陷的材料是有害且昂贵的。这就是为什么出色的质量控制是成功再利用计划的第一步。
接近零缺陷和正式认证的需求增加了约 20% 的构建可重用工件的成本和约 30% 的构建时间表。但是，使用经过认证的可重复使用材料可以从建造成本中减少 80% 以上，并且可以将工期缩短 60% 以上。材料重复使用次数越多，其累积经济价值就越大。

## 在软件质量控制方面取得卓越成就
除了向更多经过认证的可重用组件迈进之外，从与查找和修复错误相关的巨额成本中可以明显看出，软件行业需要比 2020 年常见的质量控制更好的质量控制。

### 卓越的质量控制

优秀的软件项目具有严格的质量控制方法，包括开始前的正式质量评估、开发期间的完整缺陷测量和跟踪，以及全套缺陷预防、测试前移除和测试阶段。低缺陷潜力和高缺陷去除效率 (DRE) 的结合是软件卓越的全部意义所在。
在质量控制方面表现出色的最常见公司通常是制造复杂物理设备的公司，例如计算机、飞机、嵌入式发动机组件、医疗设备和电话交换系统（软件工程最佳实践；琼斯，2010 年）。如果没有卓越的质量，这些物理设备将无法成功运行。更糟糕的是，失败可能导致诉讼甚至刑事指控。因此，所有使用软件来控制复杂物理机械的公司在软件质量上都趋向于优秀。
按字母顺序显示软件质量优秀的组织包括 Advanced Bionics、Apple、AT&T、Boeing、Ford 的发动机控制、General Electric 的喷气发动机、Hewlett Packard 的嵌入式软件、IBM 的系统软件、Motorola 的电子产品、NASA 的空间控制，海军用于水面武器，雷神公司和西门子用于电子元件。
具有出色质量控制的公司和项目往往具有较低的代码圈复杂度和较高的测试覆盖率，即测试用例覆盖了 > 95% 的路径和风险区域。
这些公司也很好地衡量质量，并且都知道他们的 DRE 水平。 （任何不衡量并了解其 DRE 的公司的 DRE 可能低于 85%。）
卓越的软件质量还对关键材料（即关键需求、设计、架构和代码段）进行预测试检查。卓越的质量还意味着对所有新模块、模块的重大更改和重大错误修复 100% 使用预测试静态分析。就此而言，静态分析在维护老化的遗留应用程序期间也很有价值。
优秀的测试涉及经过认证的测试人员，使用数学方法（例如实验设计）和测试序列进行正式的测试用例设计，至少包括：（1）单元测试； (2) 功能测试； (3) 回归测试； (4) 性能测试； (5) 可用性测试； (6) 系统测试； (7) beta 或客户验收测试。有时还包括额外的测试，例如供应链或安全性。
对于 10,000 个功能点大小范围内的大型系统，出色的质量控制具有约 97% 的 DRE 水平，对于大小小于 1,000 个功能点的小型项目，DRE 水平在约 99.6% 之间。
100% 的 DRE 理论上是可能的，但极为罕见。这本书的作者仅在检查的大约 25,000 个项目中的 10 个项目中指出了 100% 的 DRE。碰巧的是，具有 100% DRE 的项目都是由 IBM 构建的编译器和汇编器，并且使用了 85% 以上经过认证的可重用材料。这些团队都是编译技术方面的专家，当然也使用了全套的预测试缺陷消除和测试阶段。

### 平均质量控制
在当今世界，敏捷是新的平均水平，并且确实比瀑布式开发迈出了一大步。敏捷开发已被证明对于规模低于 1,000 个功能点的较小应用程序是有效的。敏捷不能很好地扩展，也不是质量的最佳方法。事实上，表 2.1 和 2.2 都使用了敏捷，因为它在 2015 年非常普遍。
敏捷在质量测量方面很弱，并且通常不使用检查，在任何已知的缺陷消除形式中，它具有最高的 DRE。检查在 DRE 中排名前 85%，并且还提高了测试 DRE 水平。在作者使用 Agile 的客户中，DRE 的平均值在 92%–94% 之间。这当然比 85% 到 90% 的行业平均水平要好，但还没有达到达到最佳结果实际所需的 99%。
质量控制比敏捷更强大的方法包括个人软件过程 (PSP)、团队软件过程 (TSP) 和合理统一过程 (RUP)，它们在 DRE 中通常排名前 97%) (Applied Software Measurement, Jones, 2008)。
一些但并非所有敏捷项目都使用“结对编程”，其中两个程序员共用一个办公室和一个工作站，轮流编码，而另一个程序员则观察和“导航”。结对编程非常昂贵，但与单个程序员相比，质量只提高了 15% 左右。结对编程在发现错误方面不如正式检查有效，正式检查通常需要 3 到 5 名人员一起使用正式方法来查找错误。关键检查结合静态分析具有比结对编程更高的缺陷去除率，成本低于结对编程的 50%。
与瀑布式开发相比，敏捷是质量的明显改进，但不如 TSP 和 RUP 的质量强方法有效。
一般项目通常不会按来源预测缺陷，并且在测试开始之前不会测量 DRE，即需求和设计缺陷报告不足，有时不可见。
自 1984 年以来，软件质量控制的最新进展是静态分析，现在一般和高级组织经常使用。静态分析工具可以发现大约 55%–65% 的代码缺陷，这远高于大多数形式的测试。
许多测试阶段，如单元测试、功能测试、回归测试等，发现代码错误的效率只有 35% 左右，或者三分之三找到一个错误。这就解释了为什么需要 6-10 种不同的测试。
“一般”的公司和项目类型包括由数百家银行、保险公司、零售和批发公司以及联邦、州和市政各级的许多政府机构构建的内部软件。
平均质量控制的 DRE 水平从大型系统的约 85% 到小型和简单项目的 96%。

### 质量控制不佳

质量控制不佳的特点是缺陷预防不力，几乎完全省略了静态分析和形式检查等测试前缺陷去除方法。质量控制不佳的另一个特点是质量措施无能和不准确，忽略了需求和设计中的前端缺陷。在测量代码缺陷方面也存在差距。例如，大多数质量控制不佳的公司不知道可能需要多少测试用例或各种测试阶段的效率如何。
质量控制不佳的公司也无法执行任何类型的预先质量预测，因此他们在不知道可能发生多少错误以及防止或消除这些错误的最佳方法是什么的情况下直接进入开发阶段。测试通常由未经培训、未经认证的开发人员进行，不使用任何正式的测试用例设计方法。
与低质量相关的长时间计划和高成本的主要原因之一是这样一个事实，即测试开始时发现了如此多的错误，以至于测试间隔比计划延长了两到三倍（估计软件成本；琼斯，2007 ）。
一些因质量控制不佳而著称的软件包括奥巴马医改网站、用于财产税评估的市政软件以及用于程序化股票交易的软件，这些软件已经导致了几次大规模的股票崩盘。事实上，政府软件项目往往比企业软件有更多质量较差的项目。例如，这本书的作者曾作为专家证人，为比任何其他行业部门更多的州政府软件故障而提起的低质量诉讼。
质量控制不佳的 DRE 水平通常低于 85%。事实上，对于被取消的项目或最终因质量不佳而提起诉讼的项目，DRE 水平可能会降至 80% 以下，这足以被视为专业不当行为。在本书作者是专家证人的诉讼中，不幸的是，低于 80% 范围的 DRE 水平是一种不幸的标准。
表 2.5 显示了从 1,000 个软件项目样本中注意到的 DRE 范围。样本包括系统和嵌入式软件、Web 项目、云项目、信息技术项目以及国防和商业包。
表 2.5 千个项目 DRE 分布

| DRE     | 项目  | 百分比 |
| ------- | ----- | ------ |
| >99.00% | 10    | 0.01   |
| 95%–99% | 120   | 12.00  |
| 90%–94% | 250   | 25.00  |
| 85%–89% | 475   | 47.50  |
| 80%–85% | 125   | 12.50  |
| <80.00% | 20    | 2.00   |
| 总计    | 1,000 | 100.00 |

可以看出，高 DRE 并不经常发生。 这是不幸的，因为与 DRE 中低于 85.00% 的项目相比，DRE 中高于 95.00% 的项目具有更短的时间表和更低的成本。 软件行业并没有很好地衡量质量或生产力以了解这一点。
然而，关于高质量的最重要的经济事实是：与 DRE 中 < 90% 的项目相比，DRE 中 > 97% 的项目具有更短的时间表和更低的成本。 这是因为由于省略了预测试检查和静态分析，DRE 低的项目的测试时间表至少是高 DRE 项目的两倍！
表 2.6 显示了四种应用规模平台和六种技术组合的 DRE。
表 2.6 软件缺陷消除效率 (DRE)

|         |                          |         | 注 1：缺陷去除效率 (DRE) 是发布前的完全去除 |           |            | Average |
| ------- | ------------------------ | ------- | ------------------------------------------- | --------- | ---------- | ------- |
|         |                          |         | 注2：大小以IFPUG功能点表示 4.3              |           |            |         |
|         | Cases                    | 100 DRE | 1000 DRE                                    | 10000 DRE | 100000 DRE |         |
| 1       | 检查、静态分析、正式测试 | 99.60%  | 98.50%                                      | 97.00%    | 96.00%     | 97.78%  |
| 2       | 检查、正式测试           | 98.00%  | 97.00%                                      | 96.00%    | 94.50%     | 96.38%  |
| 3       | 静态分析，正式测试       | 97.00%  | 96.00%                                      | 95.00%    | 93.50%     | 95.38%  |
| 4       | 正式测试                 | 93.00%  | 91.00%                                      | 90.00%    | 88.50%     | 90.63%  |
| 5       | 非正式测试               | 87.00%  | 85.00%                                      | 83.00%    | 80.00%     | 83.75%  |
| Average |                          | 94.92%  | 93.50%                                      | 92.20%    | 90.50%     | 92.78%  |

可以看出，DRE 因大小和技术堆栈而异。检查、静态分析和正式测试的组合对于所有尺寸都具有最高的 DRE 值。
DRE 指标最初由 IBM 于 1970 年左右开发。它通常通过测量在发布给客户之前发现的所有缺陷，然后在使用的前 90 天内客户报告的缺陷来计算（软件质量经济学，Jones 和 Bonsignour， 2012）。
截至 2020 年，DRE 措施已被数十家高科技公司使用，但并未被政府机构或银行、保险和制造业等其他行业广泛使用。但是，DRE 是所有质量度量中最有用的一种。 Namcook 建议所有公司和政府机构在所有项目中使用“缺陷潜力”和“缺陷去除效率”。短语“潜在缺陷”也起源于大约 1970 年的 IBM，它是源自需求、架构、设计、代码、文档和“错误修复”或在错误修复本身中发现的新错误的总和。
正式测试意味着经过认证的测试人员和数学测试用例设计，例如使用“实验设计”。非正式测试意味着未经培训的未经认证的开发人员。
请注意，冠状病毒将消除同一房间内的集体检查，并且可能会切换到 Zoom 检查。
表 2.7 显示了相同应用规模平台组合和技术组合的日历月时间表。
表 2.7 与质量控制相关的软件计划

|         |                          |         | 注 1：大小以 IFPUG 功能点表示 4.3 |           |            | Average |
| ------- | ------------------------ | ------- | --------------------------------- | --------- | ---------- | ------- |
|         |                          |         | 注2：时间表以历月表示             |           |            |         |
|         | Cases                    | 100 DRE | 1000 DRE                          | 10000 DRE | 100000 DRE |         |
| 1       | 检查、静态分析、正式测试 | 5.50    | 12.88                             | 30.20     | 70.79      | 29.84   |
| 2       | 检查、正式测试           | 5.75    | 13.80                             | 33.11     | 79.43      | 33.03   |
| 3       | 静态分析，正式测试       | 5.62    | 13.34                             | 31.62     | 74.99      | 31.39   |
| 4       | 正式测试                 | 6.03    | 14.79                             | 36.31     | 89.13      | 36.56   |
| 5       | 非正式测试               | 6.31    | 15.85                             | 39.81     | 100.00     | 40.49   |
| Average |                          | 5.84    | 14.13                             | 34.21     | 82.87      | 34.26   |

从表 2.6 可以看出，高质量不会增加开发时间。 高质量缩短了进度，因为进度延迟的主要原因是测试开始时出现太多错误，这会将测试进度延长数周或数月（Estimating Software Costs, Jones, 2007）。
注意：Namcook Analytics 的软件风险大师 (SRM) 工具可以预测缺陷预防方法、测试前缺陷消除方法和测试阶段的任意组合的结果。 SRM 还可以预测 57 种开发方法、79 种编程语言的结果以及 CMMI 所有五个级别的影响。
由于“浪费”的主要形式之一涉及取消的项目，表 2.8 显示了高质量对项目取消率的影响。 由于许多被取消的项目规模超过 10,000 个功能点，因此表 2.8 中仅显示了大型系统的数据。
表 2.8 软件质量对取消的影响

|         |                          |         | 注 1：大小以 IFPUG 功能点表示 4.3 |           |            | Average |
| ------- | ------------------------ | ------- | --------------------------------- | --------- | ---------- | ------- |
|         |                          |         | 注2：时间表以历月表示             |           |            |         |
|         | Cases                    | 100 DRE | 1000 DRE                          | 10000 DRE | 100000 DRE |         |
| 1       | 检查、静态分析、正式测试 |         |                                   | 7.00%     | 14.00%     | 10.50%  |
| 2       | 检查、正式测试           |         |                                   | 12.00%    | 24.00%     | 18.00%  |
| 3       | 静态分析，正式测试       |         |                                   | 16.00%    | 32.00%     | 24.00%  |
| 4       | 正式测试                 |         |                                   | 43.00%    | 57.00%     | 50.00%  |
| 5       | 非正式测试               |         |                                   | 72.00%    | 83.00%     | 77.50%  |
| Average |                          |         |                                   | 30.00%    | 42.00%     | 36.00%  |

从表 2.8 中可以看出，质量控制不善以及缺乏预测试检查和静态分析是取消项目的主要原因。
表 2.9 显示了质量控制对软件外包诉讼的影响。 本书作者曾在 15 起违约案件中担任专家证人，并在其他约 50 起案件中向其他作证专家提供数据。 事实上，来自作者著作《软件质量经济学》（Jones 和 Bonsignour，2011 年）中的数据被用于许多诉讼，有时双方都使用，因为没有其他有用的已发布质量数据来源。
表 2.9 软件质量对诉讼的影响

|         |                          |         | 注 1：大小以 IFPUG 功能点表示 4.3 |           |            | Average |
| ------- | ------------------------ | ------- | --------------------------------- | --------- | ---------- | ------- |
|         |                          |         | 注2：时间表以历月表示             |           |            |         |
|         | Cases                    | 100 DRE | 1000 DRE                          | 10000 DRE | 100000 DRE |         |
| 1       | 检查、静态分析、正式测试 |         |                                   | 2.00%     | 5.00%      | 3.50%   |
| 2       | 检查、正式测试           |         |                                   | 4.00%     | 12.00%     | 8.00%   |
| 3       | 静态分析，正式测试       |         |                                   | 6.00%     | 17.00%     | 11.50%  |
| 4       | 正式测试                 |         |                                   | 12.00%    | 24.00%     | 18.00%  |
| 5       | 非正式测试               |         |                                   | 24.00%    | 48.00%     | 36.00%  |
| Average |                          |         |                                   | 9.60%     | 21.20%     | 15.40%  |

可以看出，外包项目的质量控制不佳极有可能因为项目被取消或部署后出现重大错误而导致业主无法按预期使用软件而告上法庭。
表 2.10 显示了最有可能出现在五个质量控制级别中的每个行业的类型。一般来说，质量最好的行业往往是那些制造复杂物理设备的行业，如医疗设备、飞机或电话交换系统。
请注意，2020 年的冠状病毒推迟了法庭诉讼程序，并导致法庭结构发生物理变化，例如保护法官、证人和律师的塑料墙。陪审员将不再并排坐在陪审团里，但可能会从法院其他地方的外部位置使用 Zoom。
经常出现质量控制不佳的底层行业包括州、市政和联邦文职政府团体（军用软件在质量控制方面相当不错），还有股票交易软件。就此而言，税务软件不是很好，并且在诸如财产税和所得税计算方面存在错误。
表 2.10 在每个软件质量级别注明的行业

|      |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- |
|      |      |      |      |      |      |      |
|      |      |      |      |      |      |      |
|      |      |      |      |      |      |      |
|      |      |      |      |      |      |      |
|      |      |      |      |      |      |      |
|      |      |      |      |      |      |      |
|      |      |      |      |      |      |      |

表 2.10 显示了趋势，但数据不是绝对的。 一些政府团体比预期的要好，但不是很多。 Namcook 拥有 70 多个行业的数据。
本章的最终表格取自作者与 Olivier Bonsignour 合着的《软件质量经济学》的第 7 章； 琼斯 2011 年作为合著者。 表 2.11 显示了优秀、一般和差的软件质量按应用程序大小的大致分布。
表 2.11 软件项目按质量等级分布

| 功能点 | （示例 = 到 2020 年大约有 27,000 个软件项目） |          |        |
| ------ | --------------------------------------------- | -------- | ------ |
|        | 低质量                                        | 平均质量 | 高质量 |
| 10     | 25.00%                                        | 50.00%   | 25.00% |
| 100    | 30.00%                                        | 47.00%   | 23.00% |
| 1000   | 36.00%                                        | 44.00%   | 20.00% |
| 10000  | 40.00%                                        | 42.00%   | 18.00% |
| 100000 | 43.00%                                        | 45.00%   | 12.00% |
| 均值   | 37.25%                                        | 44.50%   | 18.25% |

可以看出，软件质量随着应用程序大小的增加而下降。这是由于大型软件应用程序固有的复杂性，再加上缺乏经过标准认证的可重用组件。此外，对于规模超过 10,000 个功能点的许多大型应用程序，还省略了预测试检查和静态分析。

## 总结和结论

对软件工程世界的工作模式的分析揭示了一个令人惊讶的事实。软件工程的大部分工作基本上都是“浪费”的，因为它涉及要么处理不会完成的项目，要么处理根本不应该存在的缺陷。
如果软件社区能够意识到糟糕的软件工程经济学是由质量差造成的，那么我们可能会比现在更认真地对待缺陷预防、缺陷移除、可重用性和风险分析。
冠状病毒对软件工程的影响在 2020 年中期尚无法预测。毫无疑问，由于取消了员工会议和视察等面对面的活动，因此会产生影响。可能 Zoom 或同等产品可以替代，但作者使用 Zoom 的经验是，它还不能有效替代实时会议，尤其是需要共享和审查文档的会议。这本书的作者从未尝试过使用 Zoom 进行软件代码检查，但他怀疑这是否容易。
